{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h2>Welcome back, {{ customer.name }}</h2>
</div>

<div class="row g-4">
    {% for acc in accounts %}
    <div class="col-md-6">
        <div class="card p-4 bg-primary text-white">
            <small class="opacity-75">{{ acc.account_type }} Account</small>
            <h1 class="display-6 mt-2">${{ acc.balance }}</h1>
            <p class="mb-0 mt-3 small">Acc: #{{ acc.account_id }}000{{ customer.customer_id }}</p>
        </div>
    </div>
    {% endfor %}
</div>

<div class="row mt-4 g-4">
    <div class="col-md-4">
        <div class="card p-4">
            <h5>Quick Deposit</h5>
            <form action="{{ url_for('handle_action', action_type='deposit', customer_id=customer.customer_id) }}" method="POST">
                <input type="number" name="amount" class="form-control mb-3" placeholder="Amount" required>
                <button class="btn btn-success w-100">Add Funds</button>
            </form>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card p-4">
            <h5>Recent Transactions</h5>
            <table class="table table-hover mt-3">
                <thead class="table-light"><tr><th>Type</th><th>Amount</th><th>Status</th></tr></thead>
                <tbody>
                    {% for t in customer.get_accounts()[0].get_transactions()[:5] %}
                    <tr><td>{{ t.type }}</td><td>${{ t.amount }}</td><td><span class="badge bg-success">Completed</span></td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
